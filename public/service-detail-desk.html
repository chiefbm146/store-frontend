<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="./js/clean-url.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service - Your Store</title>

    <meta property="og:type" content="website">
    <meta property="og:title" content="Service Details">
    <meta property="og:description" content="Learn more about this service from Your Store">

    <link rel="stylesheet" href="./css/service-detail.css">
</head>
<body>
    <nav class="back-nav">
        <button class="back-button" onclick="navigateBack()">Back to Shop</button>
        <div class="nav-breadcrumb">
            <a href="/menu-desk.html">Store</a> / <a href="/shop-desk.html">Shop</a> / <span id="breadcrumb-title">Service Details</span>
        </div>
    </nav>

    <div id="error-container" style="display: none;">
        <div class="error-message">
            <h2>Service Not Found</h2>
            <p>We couldn't find the service you're looking for.</p>
            <button class="back-button" onclick="navigateBack()">Return to Shop</button>
        </div>
    </div>

    <div id="main-content">
        <section class="hero">
            <div class="hero-content">
                <div class="hero-text">
                    <div class="workshop-badge" id="service-type">Service</div>
                    <h1 class="hero-title" id="service-title">Loading Service...</h1>
                    <p class="hero-description" id="service-description">Please wait...</p>
                </div>
                <div class="hero-image-container" id="service-icon-container">
                    <span id="service-emoji" class="product-emoji-icon" style="font-size: 8rem;">⚙️</span>
                </div>
            </div>
        </section>

        <section class="content-section">
            <div class="section-wrapper">
                <div class="section-header">
                    <div class="section-label">Overview</div>
                    <h2 class="section-title">About This Service</h2>
                </div>
                <div class="about-content" id="service-long-description">
                    <p>Loading service information...</p>
                </div>
            </div>
        </section>

        <section class="content-section">
            <div class="section-wrapper">
                <div class="section-header">
                    <div class="section-label">Features</div>
                    <h2 class="section-title">Service Highlights</h2>
                </div>
                <div class="highlights-grid" id="service-highlights"></div>
            </div>
        </section>

        <section class="content-section">
            <div class="section-wrapper">
                <div class="section-header">
                    <div class="section-label">What's Included</div>
                    <h2 class="section-title">Included in This Service</h2>
                </div>
                <div class="pricing-grid" id="service-included"></div>
            </div>
        </section>

        <section class="cta-section">
            <div class="cta-content">
                <h2 class="cta-title">Ready to Book This Service?</h2>
                <p class="cta-text">Add this service to your cart and our team will contact you to schedule.</p>
                <button class="cta-button" onclick="addToCart()">Add to Cart</button>
            </div>
        </section>
    </div>

    <script type="module">
        import { injectTheme } from './js/theme-injector.js';
        import { getServiceItem } from './js/config/content/services-catalog.js';

        injectTheme();

        function getServiceId() {
            const params = new URLSearchParams(window.location.search);
            return params.get('id');
        }

        function renderService() {
            const serviceId = getServiceId();
            if (!serviceId) {
                document.getElementById('error-container').style.display = 'flex';
                document.getElementById('main-content').style.display = 'none';
                return;
            }

            const service = getServiceItem(serviceId);
            if (!service) {
                document.getElementById('error-container').style.display = 'flex';
                document.getElementById('main-content').style.display = 'none';
                return;
            }

            document.getElementById('service-type').textContent = service.category || 'Service';
            document.getElementById('service-title').textContent = service.name;
            document.getElementById('service-description').textContent = service.description;
            document.getElementById('breadcrumb-title').textContent = service.name;

            if (service.image) {
                document.getElementById('service-icon-container').innerHTML = 
                    `<img src="${service.image}" alt="${service.name}" class="workshop-image">`;
            } else {
                document.getElementById('service-emoji').textContent = service.emoji;
            }

            const descDiv = document.getElementById('service-long-description');
            descDiv.innerHTML = service.longDescription
                .split('\n\n')
                .map(para => `<p>${para}</p>`)
                .join('');

            const highlightsGrid = document.getElementById('service-highlights');
            highlightsGrid.innerHTML = service.highlights.map(h => `
                <div class="highlight-card">
                    <div class="highlight-icon">✓</div>
                    <div class="highlight-text">${h}</div>
                </div>
            `).join('');

            const includedGrid = document.getElementById('service-included');
            if (service.included) {
                includedGrid.innerHTML = service.included.map(item => `
                    <div class="pricing-card">
                        <div class="highlight-icon">✓</div>
                        <p class="pricing-description">${item}</p>
                    </div>
                `).join('');
            }
        }

        window.navigateBack = function() {
            window.location.href = '/shop-desk.html';
        };

        window.addToCart = function() {
            const serviceId = getServiceId();
            console.log('[Service Detail] Adding to cart:', serviceId);
            alert('Item added to cart! (Cart functionality coming soon)');
        };

        document.addEventListener('DOMContentLoaded', renderService);
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') window.navigateBack();
        });
    </script>
</body>
</html>
