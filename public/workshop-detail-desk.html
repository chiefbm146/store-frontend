<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="./js/clean-url.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workshop - Your Store</title>

    <meta property="og:type" content="website">
    <meta property="og:title" content="Workshop Details">
    <meta property="og:description" content="Learn more about this service offering from Your Store">

    <!-- CSS: Separated and using CSS variables -->
    <link rel="stylesheet" href="./css/workshop-detail.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="back-nav">
        <button class="back-button" onclick="navigateBack()">Back to Shop</button>
        <div class="nav-breadcrumb">
            <a href="/menu-desk.html">Store</a> / <a href="/shop-desk.html">Shop</a> / <span id="breadcrumb-title">Workshop Details</span>
        </div>
    </nav>

    <div id="error-container">
        <div class="error-message">
            <h2>Service Not Found</h2>
            <p>We couldn't find the service you're looking for.</p>
            <button class="back-button" onclick="navigateBack()">Return to Services</button>
        </div>
    </div>

    <div id="main-content">
        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-content">
                <div class="hero-text">
                    <div class="workshop-badge loading-skeleton" id="workshop-type">Loading...</div>
                    <h1 class="hero-title loading-skeleton" id="workshop-title">Loading Service...</h1>
                    <p class="hero-description loading-skeleton" id="workshop-description">Please wait while we load the service details...</p>
                    <a href="/chat" class="hero-cta" id="hero-cta">Schedule Service â†’</a>
                </div>
                <div class="hero-image-container">
                    <img id="workshop-image" class="workshop-image" src="" alt="Service" style="display: none;">
                </div>
            </div>
        </section>

        <!-- Quick Info Bar -->
        <section class="quick-info">
            <div class="quick-info-grid" id="quick-info-grid">
                <!-- Populated by JS -->
            </div>
        </section>

        <!-- About Section -->
        <section class="content-section">
            <div class="section-wrapper">
                <div class="section-header">
                    <div class="section-label">Overview</div>
                    <h2 class="section-title">About This Service</h2>
                </div>
                <div class="about-content" id="workshop-long-description">
                    <p class="loading-skeleton">Loading service information...</p>
                </div>
            </div>
        </section>

        <!-- Highlights Section -->
        <section class="content-section">
            <div class="section-wrapper">
                <div class="section-header">
                    <div class="section-label">What's Included</div>
                    <h2 class="section-title">You Will Experience</h2>
                    <p class="section-subtitle">Everything you need for a transformative learning experience</p>
                </div>
                <div class="highlights-grid" id="workshop-highlights">
                    <!-- Populated by JS -->
                </div>
            </div>
        </section>

        <!-- Pricing Section -->
        <section class="content-section">
            <div class="section-wrapper">
                <div class="section-header">
                    <div class="section-label">Investment</div>
                    <h2 class="section-title">Service Pricing</h2>
                    <p class="section-subtitle">Transparent pricing for community and corporate groups</p>
                </div>
                <div class="pricing-grid" id="pricing-grid">
                    <!-- Populated by JS -->
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section class="cta-section">
            <div class="cta-content">
                <h2 class="cta-title">Ready to Book This Workshop?</h2>
                <p class="cta-text">Add this workshop to your cart and complete your purchase. Our team will contact you to schedule your session.</p>
                <button class="cta-button" id="add-to-cart-button" onclick="addToCart()">Add to Cart</button>
            </div>
        </section>
    </div>

    <script type="module">
        import { injectTheme } from './js/theme-injector.js';
        import WorkshopLoader from './js/workshop-loader.js';

        // Step 1: Inject theme CSS variables
        injectTheme();
        console.log('[Workshop Detail Page] Theme injected');

        // Step 2: Initialize WorkshopLoader
        window.navigateBack = function() {
            window.location.href = '/shop-desk.html';
        };

        // Add to cart function
        window.addToCart = function() {
            const workshopId = WorkshopLoader.getWorkshopId();
            console.log('[Workshop Detail] Adding to cart:', workshopId);
            // TODO: Implement cart logic
            alert('Item added to cart! (Cart functionality coming soon)');
        };

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') window.navigateBack();
        });

        // Load workshop data
        document.addEventListener('DOMContentLoaded', () => {
            WorkshopLoader.init();

            // Update CTA buttons to include workshop ID for auto-booking
            const workshopId = WorkshopLoader.getWorkshopId();
            if (workshopId) {
                const heroCta = document.getElementById('hero-cta');
                const ctaButton = document.getElementById('cta-button');
                if (heroCta) heroCta.href = `/chat?book=${workshopId}`;
                if (ctaButton) ctaButton.href = `/chat?book=${workshopId}`;
            }
        });
    </script>
</body>
</html>
